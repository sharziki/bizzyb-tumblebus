// Bizzy B's Tumblebus - Enrollment System
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Enrollment {
  id              String   @id @default(cuid())
  enrollmentNumber Int     @unique @default(autoincrement())
  
  // Child Info
  studentFirstName  String
  studentLastName   String
  dateOfBirth       DateTime?
  age               Int?
  
  // Parent/Guardian Info  
  parentFirstName   String
  parentLastName    String
  email             String
  phone             String
  address           String?
  city              String?
  state             String?
  zipCode           String?
  
  // Emergency Contact
  emergencyContactName  String?
  emergencyContactPhone String?
  emergencyRelation     String?
  
  // Program Info
  programType       String    // Weekly Program, Birthday Party, Special Event, etc.
  classLevel        String?   // Toddler, Preschool, School Age, Big Kids
  preferredSchedule String?
  
  // Medical/Notes
  medicalConditions String?
  allergies         String?
  specialNeeds      String?
  notes             String?
  
  // Referral
  referralSource    String?
  
  // Status
  status            String    @default("pending") // pending, approved, waitlist, cancelled
  
  // Timestamps
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  
  @@index([status])
  @@index([createdAt])
  @@index([studentLastName])
}

model TumblebusAdmin {
  id            String    @id @default(cuid())
  email         String    @unique
  passwordHash  String
  name          String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}
